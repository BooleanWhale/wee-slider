class WeeSlider extends HTMLElement{constructor(){super(),this.loopSlides="true"===this.dataset.loop,this.slides=[...this.querySelectorAll(".wee-slider__slide")],this.navDots=[...this.querySelectorAll(".wee-slider__navdot")],this.buttons=[...this.querySelectorAll(".wee-slider__buttons button")],this.handleButtonClick=this.handleButtonClick.bind(this),this.buttons.forEach((s=>s.addEventListener("click",this.handleButtonClick))),this.navDots.forEach(((s,t)=>s.addEventListener("click",(()=>{this.handleSlideChange(t)}))));const s=new IntersectionObserver((s=>{s.forEach((({target:s,isIntersecting:t})=>{const e=this.slides.indexOf(s);s.classList.toggle("visible",t),this.navDots[e].classList.toggle("visible",t),this.loopSlides||this.handleSlideButtonActive()}))}),{threshold:.9});this.slides.forEach((t=>s.observe(t))),this.classList.add("loaded")}handleButtonClick(s){const{classList:t}=s.currentTarget,e=t.contains("wee-slider__button-next"),i=e?1:-1,l=s=>s.classList.contains("visible");let n=e?this.slides.findLastIndex(l):this.slides.findIndex(l);n=-1!==n?n+i:e?0:this.slides.length-1,this.loopSlides&&(n=(n+this.slides.length)%this.slides.length),this.handleSlideChange(n)}handleSlideChange(s){this.slides.forEach(((t,e)=>{e===s&&t.scrollIntoView()})),this.navDots.forEach(((t,e)=>{t.classList.toggle("active",e===s)}))}handleSlideButtonActive(){this.buttons.forEach((s=>{const t=s.classList.contains("wee-slider__button-next")?this.slides[this.slides.length-1]:this.slides[0];s.disabled=t.classList.contains("visible")}))}}customElements.define("wee-slider",WeeSlider);